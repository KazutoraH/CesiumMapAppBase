# Node.jsç’°å¢ƒã‚’ä½œã£ã¦ãƒ“ãƒ«ãƒ‰ã™ã‚‹ï¼ˆViteé–‹ç™ºç”¨ï¼‰
FROM node:20

# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
WORKDIR /app

# package.jsonã¨lockãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
COPY package*.json ./

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN npm install


# ğŸ”§ cesium ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ˜ç¤ºçš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN npm install cesium --save

# vite-plugin-cesium ã‚’è¿½åŠ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ˜ç¤ºçš„ã«ï¼‰
RUN npm install vite-plugin-cesium --save-dev

# ã‚¢ãƒ—ãƒªå…¨ä½“ã‚’ã‚³ãƒ”ãƒ¼
COPY . .

# SSLè¨¼æ˜æ›¸ã‚’ã‚³ãƒ”ãƒ¼(é–‹ç™ºç”¨ã®ãŸã‚ã€å®Ÿéš›ã®è¨¼æ˜æ›¸ã¯ä½¿ç”¨ã—ãªã„ã“ã¨ï¼‰
COPY ./localhost.key ./localhost.key
COPY ./localhost.crt ./localhost.crt

# ã‚µãƒ¼ãƒèµ·å‹• (vite dev serverã‚’ç«‹ã¡ä¸Šã’ã‚‹å ´åˆ)
CMD ["npm", "run", "dev", "--", "--host"]
